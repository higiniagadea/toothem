<fieldset class="ui-widget ui-widget-content ui-corner-top">
  <legend class="ui-widget ui-widget-content ui-corner-all ui-widget-header">Tratamiento</legend>

<% form_for(@tratamiento) do |f| %>
  <%= f.error_messages(:header_message=>'Ingreso Incorrecto: ',:message=>'Se encontraron los siguientes errores') %>
      <%= f.hidden_field :paciente_id, 'value' => @paciente.id.to_s  %>
  <% if params[:ficha_id] %>
  <%= f.hidden_field :ficha_id,'value' =>  @ficha  %>
  <%end%>
  <div class="errores">
          <ol style="list-style:none"></ol>
        </div>
<table style=" text-align: left;">

<tr>
  <th>Fecha</th>
    <td><span class="fecha" class="ui-widget-content">
        <input class="ui-widget-content "type="text" id="fecha" size="10" name="tratamiento[fecha]" value="<%=@tratamiento.fecha.strftime('%d/%m/%Y')%>" />
      </span></td>
 
  <th>Diente</th>
  <td><%= f.text_field :diente, :size => 10 , :class=> 'ui-widget-content required', :title=> 'Diente no puede estar en blanco, maximo dos caracteres', :onkeypress=> 'return validar(event)'%>
  </td>
  <th>Cara</th>
  <td><%= f.text_field :cara, :size => 10, :class=> 'ui-widget-content required', :title=> 'Cara no puede estar en blanco, maximo dos caracteres', :onkeypress=> 'return validar(event)' %>
  </td>
  </tr>
   <tr>
  <th>Prestaci&oacute;n </th>
  <td><%= f.collection_select(:prestacion_id, Prestacion.all, :id, :descripcion, :class=> 'ui-widget-content required', :title=> 'Descripcion no debe estar en blanco')%>
  </td>
  <% unless params[:ficha_id]%>
   <th>Profesional</th>
            <td>
              <%= f.collection_select(:profesional_id, Profesional.all, :id, :nombre, :class => 'ui-widget-content required', :title=> 'Seleccione un profesional') %>
            </td>
    <%else%>
         <%= f.hidden_field :profesional_id, 'value' =>  @ficha.profesional_id %>
    <%end%>

  <th>Estado del Tratamiento</th>
  <td><%= f.collection_select(:estado_tratamiento_id, EstadoTratamiento.all, :id, :nombre, :class=> 'ui-widget-content required', :title=> 'Estado no puede estar en blanco')%>
  </td>


  </tr>
  <tr>
    <th>Importe Cubierto </th>
  <td><%= f.text_field :importe_cubierto, :size => 10, :class=> 'ui-widget-content required', :title=> 'Importe debe ser numerico', :onkeypress=> 'return validar(event)' %>
  </td>
  <th>Coseguro</th>
  <td>
    <%= f.text_field :coseguro, :size=>10, :class=> 'ui-widget-content', :title=> 'Coseguro debe ser numerico', :onkeypress=> 'return validar(event)' %></td>
  </tr>
</table>
  <table>
         <tr>
            <td style=" float: left; margin-left:  700px">
                 
                  <%= f.submit 'Editar', :class => 'submit ui-button ui-widget ui-state-default ui-corner-all' %>

                  

            </td>

         </tr>
      </table>
 
  


  
   
  
<% end %>
</fieldset>



<script type="text/javascript">
  function validar(e) { // 1
    tecla = (document.all) ? e.keyCode : e.which; // 2
    if (tecla==8) return true; // 3
    patron =/\d/; //4
    te = String.fromCharCode(tecla); // 5
    return patron.test(te); // 6
}
  $("#edit_tratamiento").validate({
        //errorLabelContainer: $("#new_paciente div.errores")
       errorContainer: $("#edit_tratamiento div.errores"),
       errorLabelContainer: $("ol", $("#edit_tratamiento div.errores")),
       wrapper: 'li',
       meta: "validate"
     });
$("#fecha").datepicker({ dateFormat: 'dd-mm-yy',dayNamesMin: ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab'], monthNames: ['Enero','Febrero','Marzo','Abril','Mayo','Junio','Jutdo','Agosto','Septiembre','Octubre','Noviembre','Diciembre'], buttonImage: '<%= image_path("22/calendar.png")%>',buttonImageOnly: true,showOn:'button', changeYear: true, yearRange: '1960:2110', maxDate:0});
$("#fecha_finalizacion").datepicker({ dateFormat: 'dd-mm-yy',dayNamesMin: ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab'], monthNames: ['Enero','Febrero','Marzo','Abril','Mayo','Junio','Jutdo','Agosto','Septiembre','Octubre','Noviembre','Diciembre'], buttonImage: '<%= image_path("22/calendar.png")%>',buttonImageOnly: true,showOn:'button', changeYear: true, yearRange: '1960:2110', maxDate:0});

$("#fecha_liquidacion").datepicker({ dateFormat: 'dd-mm-yy',dayNamesMin: ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab'], monthNames: ['Enero','Febrero','Marzo','Abril','Mayo','Junio','Jutdo','Agosto','Septiembre','Octubre','Noviembre','Diciembre'], buttonImage: '<%= image_path("22/calendar.png")%>',buttonImageOnly: true,showOn:'button', changeYear: true, yearRange: '1960:2110', maxDate:0 });
</script>
