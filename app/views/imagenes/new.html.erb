<fieldset class="ui-widget ui-widget-content ui-corner-top">
  <legend class="ui-widget ui-widget-content ui-corner-all ui-widget-header">Nueva Imagen</legend>
  <% form_for(@imagen, :html => {:multipart => true }) do |f| -%>
  <%= f.error_messages %>

   <div class="errores">
    <ol style="list-style:none"></ol>
  </div>
  <table style=" text-align: left;">
    <tr>
    <td>
    <%= f.hidden_field :paciente_id, "value" => @paciente.id %>
    </td>
    </tr>
    <tr>
        <th>
        Seleccione archivo:</th>
        <td><%= file_field :archivo, :uploaded_data, :class=> 'ui-widget-content required', :title=> 'Por favor Seleccione un Archivo' %>
        </td>
    </tr>
    <tr>
        <th>
        Descripci&oacute;n</th>
        <td><%= f.text_field :descripcion, :class=>'ui-widget-content required', :title=> 'Descripcion no puede estar en blanco' %>
        </td>
    </tr>
    <tr>
        <th>
        Observaciones</th>
        <td><%= f.text_area :observaciones, :rows => 5 , :class=>'ui-widget-content', :title=> 'Observaciones no puede estar en blanco'%>
        </td>
    </tr>
        <td>
        <label></label>
        <%= f.submit 'Crear Imagen', :class => 'submit ui-button ui-widget ui-state-default ui-corner-all' %>
        </td>
        
   </table>
    
  <% end -%>

</fieldset>

<script type="text/javascript">

// Only create tooltips when document is ready
$(document).ready(function()
{
     $("#new_imagen").validate({
        //errorLabelContainer: $("#new_titular div.errores")
       errorContainer: $("#new_imagen div.errores"),
       errorLabelContainer: $("ol", $("#new_imagen div.errores")),
       wrapper: 'li',
       meta: "validate",
       rules :{
         "imagen[descripcion]": {required: true, rangelength: [3, 100]},
         "imagen[observaciones]":{ rangelength: [3, 500]}
       },
          messages:{
            "imagen[descripcion]":{rangelength :'Ingrese entre tres y cien caracteres'},
          "imagen[observaciones]":{ rangelength:'Ingrese entre tres y quinientos caracteres'}
        }
     });

   // Use the each() method to gain access to each of the elements attributes

   $('#imagenes img').each(function()
   {
      $(this).qtip(
      {
         content: '<a onclick="Boxy.load(\'<%= new_archivo_imagenes_path+"/"+@paciente.id.to_s+"?new_archivo_imagenesvalor="+@valor %>\',{modal: true})">Nueva</a>',
         position: 'topLeft', // Set its position
         hide: {
            fixed: true // Make it fixed so it can be hovered over
         },
         style: {
            padding: '5px 15px', // Give it some extra padding
            name: 'blue' // And style it with the preset dark theme
         }
      });
   });
});

</script>